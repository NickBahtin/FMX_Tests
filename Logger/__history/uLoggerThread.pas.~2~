unit uLoggerThread;

interface

uses
  System.SysUtils, System.Classes, System.Threading;

type
  TLoggerThread = class(TThread)
  private
    FFileName: string;
    FMessage: string;
  protected
    procedure Execute; override;
  public
    constructor Create(AFileName: string; AMessage: string);
  end;
implementation

{ TLoggerThread }

constructor TLoggerThread.Create(AFileName, AMessage: string);
begin
  inherited Create(False);
  FFileName := AFileName;
  FMessage := AMessage;
end;

procedure TLoggerThread.Execute;
var
  FileStream: TFileStream;
begin
  FileStream := TFileStream.Create(FFileName, fmOpenWrite or fmShareDenyNone);
  try
    FileStream.Seek(0, soFromEnd);
    FileStream.Write(FMessage[1], Length(FMessage));
    FileStream.Write(#13#10, 2); // Добавляем перевод строки
  finally
    FileStream.Free;
  end;
end;

end.
